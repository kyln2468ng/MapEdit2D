#include "Stage.h"
#include "DxLib.h"
#include "MapChip.h"
#include "MapEdit.h"

// shift + alt カーソル, ctrl + カーソル
//namespace
//{
//	const int IMAGE_SIZE = { 32 }; // 画像のサイズ
//	const int MAP_WIDTH = { 32 };
//	const int MAP_HEIGHT = { 22 };
//	const int MAP_CHIP_WIDTH = { 16 };
//	const int MAP_CHIP_HEIGHT = { 12 };
//
//	const int myMap[MAP_HEIGHT][MAP_WIDTH]
//		{
//			{6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,118,118,118,118,118,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,118,118,118,118,118,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,118,103,103,103,118,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,118,103,103,103,118,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,149,149,149,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,149,149,149,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,149,149,149,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,149,149,149,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,149,149,149,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,149,149,149,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,149,149,149,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,145,145,145,145,145,145,145,145,145,145,145,145,145,149,149,149,145,145,145,145,145,145,145,145,145,145,145,145,145,145,6},
//			{6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6}
//
//		};
//}

Stage::Stage()
	:GameObject()
{
	/*GameObject();
	hImage = -1;
	imageSize = 32;
	imageElement = 16;*/
	//hImage = new int[MAP_WIDTH * MAP_HEIGHT]; // 必要な時に必要な数だけ配列を準備する方法
	//hImage = std::vector<int>(MAP_CHIP_WIDTH * MAP_CHIP_HEIGHT, -1);

	////hImage = LoadGraph("./bg.png");
	//LoadDivGraph("./bg.png", MAP_CHIP_WIDTH * MAP_CHIP_HEIGHT, MAP_CHIP_WIDTH, MAP_CHIP_HEIGHT, IMAGE_SIZE, IMAGE_SIZE, hImage.data());

	mapChip_ = new MapChip();
	mapEdit_ = new MapEdit();
	
}

Stage::~Stage()
{
	/*for (int i = 0;i < MAP_CHIP_WIDTH * MAP_CHIP_HEIGHT;i++)
	{
		if (hImage[i] != -1)
		{
			DeleteGraph(i);
			hImage[i] = -1;
		}
	}*/
	//delete[] hImage; // 配列の開放　自分で取ったものは自分で消す

	/*if (hImage != -1)
	{
		DeleteGraph(hImage);
		hImage = -1;
	}*/
	delete mapChip_;
	delete mapEdit_;
}

void Stage::Update()
{
}

void Stage::Draw()
{

	//for (int j = 0; j < MAP_HEIGHT; j++)
	//{
	//	for (int i = 0; i < MAP_WIDTH; i++)
	//	{
	//		if (hImage[myMap[j][i]] != -1)
	//		{
	//			/*int kx = myMap[j][i] % imageElement;
	//				int ky = myMap[j][i] / imageElement;*/
	//			/*int ky = myMap[i][j] / 16;
	//				int kx = myMap[j][i] - ky;*/
	//			DrawGraph(i * IMAGE_SIZE, j * IMAGE_SIZE, hImage[myMap[j][i]], TRUE);
	//		}
	//	}
	//}
	
}
